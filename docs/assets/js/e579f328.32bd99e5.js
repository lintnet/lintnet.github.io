"use strict";(self.webpackChunklintnet=self.webpackChunklintnet||[]).push([[160],{7623:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var s=t(5893),i=t(1151);const l={sidebar_position:300},r="Lint rules",o={id:"lint-rule",title:"Lint rules",description:"lintnet uses Jsonnet to write lint rules.",source:"@site/docs/lint-rule.md",sourceDirName:".",slug:"/lint-rule",permalink:"/docs/lint-rule",draft:!1,unlisted:!1,editUrl:"https://github.com/lintnet/lintnet.github.io/edit/main/docs/lint-rule.md",tags:[],version:"current",sidebarPosition:300,frontMatter:{sidebar_position:300},sidebar:"tutorialSidebar",previous:{title:"Supported data format",permalink:"/docs/supported-data-format"},next:{title:"Configuration file",permalink:"/docs/config-file"}},d={},c=[{value:"Top level arguments",id:"top-level-arguments",level:2},{value:"Format of Jsonnet",id:"format-of-jsonnet",level:2},{value:"Native functions",id:"native-functions",level:2},{value:"Import Modules",id:"import-modules",level:2},{value:"Config parameter",id:"config-parameter",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"lint-rules",children:"Lint rules"}),"\n",(0,s.jsx)(n.p,{children:"lintnet uses Jsonnet to write lint rules."}),"\n",(0,s.jsx)(n.p,{children:"e.g."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:"function(param)\n  if std.objectHas(param.data.value, 'description') then [] else [{\n    name: 'description is required',\n  }]\n"})}),"\n",(0,s.jsx)(n.h2,{id:"top-level-arguments",children:"Top level arguments"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://jsonnet.org/ref/language.html#top-level-arguments-tlas",children:"Top level arguments"})," ",(0,s.jsx)(n.code,{children:"param"})," is passed to lint files."]}),"\n",(0,s.jsxs)(n.p,{children:["JSON Schema of top level arguments: ",(0,s.jsx)(n.a,{href:"https://github.com/lintnet/lintnet/blob/main/json-schema/lint-top-level-argument.json",children:"https://github.com/lintnet/lintnet/blob/main/json-schema/lint-top-level-argument.json"})]}),"\n",(0,s.jsx)(n.p,{children:"e.g."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json5",children:'{\n  data: {\n    file_path: "foo.yaml",\n    file_type: "yaml",\n    text: "...",\n    value: {\n      // data\n    }\n  },\n  config: {}, // config\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"format-of-jsonnet",children:"Format of Jsonnet"}),"\n",(0,s.jsxs)(n.p,{children:["JSON Schema: ",(0,s.jsx)(n.a,{href:"https://github.com/lintnet/lintnet/blob/main/json-schema/lint-result.json",children:"https://github.com/lintnet/lintnet/blob/main/json-schema/lint-result.json"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"JSONPath"}),(0,s.jsx)(n.th,{children:"type"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:".name"})," (required)"]}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Rule name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".excluded"})}),(0,s.jsx)(n.td,{children:"bool"}),(0,s.jsx)(n.td,{children:"If this is true, the result is excluded"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".message"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Error message"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".level"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Error level"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".location"})}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"string"})," or ",(0,s.jsx)(n.code,{children:"any"})]}),(0,s.jsx)(n.td,{children:"Location where errors occur"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".description"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Rule description"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:".custom"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"any"})}),(0,s.jsx)(n.td,{children:"Custom fields that users can set freely"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"native-functions",children:"Native functions"}),"\n",(0,s.jsxs)(n.p,{children:["lintnet supports all ",(0,s.jsx)(n.a,{href:"https://pkg.go.dev/github.com/google/go-jsonnet#NativeFunction",children:"native functions"})," supported by ",(0,s.jsx)(n.a,{href:"https://github.com/lintnet/go-jsonnet-native-functions",children:"lintnet/go-jsonnet-native-functions"}),", which ports Go standard libraries to Jsonnet.\nThe following native functions are available."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"strings.Contains"}),"\n",(0,s.jsx)(n.li,{children:"strings.TrimPrefix"}),"\n",(0,s.jsx)(n.li,{children:"strings.TrimSpace"}),"\n",(0,s.jsx)(n.li,{children:"regexp.MatchString"}),"\n",(0,s.jsx)(n.li,{children:"filepath.Base"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can executed these functions by ",(0,s.jsx)(n.code,{children:'std.native("{native function name}")'}),"."]}),"\n",(0,s.jsx)(n.p,{children:"e.g."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsonnet",children:'local contained = std.native("strings.Contains")("hello", "ll"); // true\n'})}),"\n",(0,s.jsx)(n.h2,{id:"import-modules",children:"Import Modules"}),"\n",(0,s.jsxs)(n.p,{children:["Please see ",(0,s.jsx)(n.a,{href:"/docs/module#2-imported-module",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"config-parameter",children:"Config parameter"}),"\n",(0,s.jsxs)(n.p,{children:["Please see ",(0,s.jsx)(n.a,{href:"/docs/config-file",children:"here"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var s=t(7294);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);